<?xml version="1.0" encoding="UTF-8"?>
<document>
  <title>crud_database</title>
  <!--***************Cascading Style Sheets***************-->
  <csslist>
    <css>/xlib/styles/css_ten60_lnf.css</css>
    <css>/xlib/styles/xmlverbatim.css</css>
  </csslist>
  <!--***************Links***************-->
  <links>
  </links>
  <!--***************Table of Contents***************-->
  <toc>
    <section name="title"/>
    <section name="definition"/>
    <section name="purpose"/>
  </toc>
  
  <section name="title" styleuri="/xusr/share/doc/styles_1060/style_title.xsl">
    <content>
      <name>crud_database</name>
      <text>Accessor that opens, deletes or queries a DBXML container.</text>
    </content>
  </section>
  
  <section name="definition"
    styleuri="/xusr/share/doc/styles_1060/style_definition.xsl">
    <content>
      <module>urn:com:mindalliance:channels:crud</module>
      <format>
        <sub name="format"/>
      </format>
      <returns>
        <b>t</b>
      </returns>
      <syntax>
        <type>
          <b>crud_database</b>
        </type>
        <operator req="true">open or delete or query</operator>
        <name req="true">the database name</name>
        <init>initial content (open)</init>
        <xquery>uri of an XQuery (query)</xquery>
        <target>boolean</target>
      </syntax>
    </content>
		<includes>
			<include name="format" type="xml">
					<instr>
			      <type>crud_database</type>
            <operator>open</operator>
            <name>database name</name>
            <init>uri of xml document with initial content</init>
            <target>this:response</target>
			    </instr>
			</include>
		</includes>
	</section>
	
	<section name="purpose" styleuri="/xusr/share/doc/styles_1060/style_basic.xsl">
		<content>
		  <p>
				The <code>crud_database</code> accessor opens, deletes, gets or queries a database.
				On opening the XML container is created if needed. 
       </p>
      <p>
        If the container is created and the <code>init</code> parameter is set (to the uri 
        of an xml document), then the elements, listed as children of some root element, are loaded into the database.
       </p>
      <p>
        If the container to be opened needs to first be created, no <code>init</code> parameter was given and if an xml resource exists
        at db:nameOfContainer (e.g. db:test_dbxml), then the container is initialized with the elements in that resource.
			</p>
			<p>
        If successful the response is a boolean indicating whether or not a new container had to be created, otherwise an exception is thrown.
      </p>
      <p>
        When deleting a model, the XML container that holds it is destroyed and the boolean value true is returned.
        If the container was already deleted, the boolean value false is returned.
      </p>
      <p>
        When querying a database, an xquery is referenced and the results are returned as XML.
      </p>
  		</content>
		<includes>
		</includes>
	</section>
</document>