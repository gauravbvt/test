<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Testing jQuery SVG</title>

<script language="javascript" src="jquery-1.2.1.js" type="text/javacript"></script>
<script language="javascript" src="jquery.svg.js" type="text/javascript"></script>
<style type="text/css">
	@import url(jquery.svg.css);
</style>

<style type="text/css">

	body {
		color:#666666;
	}

	a {
		border:#99CC00 1px dotted;
		font-weight:bold;
		padding:5px 5px 5px 5px;
		text-decoration:none;
		color:#666666;
	}
	
	a:hover {
		border:#CCCCCC 1px solid;
	}
	
	span {
		border:#CCCCCC 1px solid;
		margin:5px;
	}
	
	td {
		padding: 2px;
	}

</style>

<script type="text/javascript" language="javascript">
<!--
	var vbX=-100, vbY=-100, vbW=200, vbH=200 ;
	$(document).ready(function() {
		$("#graph").svg("flow.svg") ;
	});
	
	function changeViewBoxSize(dir) {
		var zoomFactor = $('#txtZoomFactor').val() ;
		vbW = vbW + dir*zoomFactor ;
		vbH = vbH + dir*zoomFactor ;
		setViewBox(vbX, vbY, vbW, vbH) ;
	}
	
	function setViewBox(x, y, w, h) {
		vbX = x ;
		vbY = y ;
		vbW = w ;
		vbH = h ;
		var newVB = x + ' ' + y + ' ' + w + ' ' + h ;
		svgManager.getSVGFor('#graph').configure({viewBox: newVB}, true) ;
		updateUITextFields() ;
	}
	
	function updateUITextFields() {
		$('#txtVBX').val(vbX) ;
		$('#txtVBY').val(vbY) ;
		$('#txtVBW').val(vbW) ;
		$('#txtVBH').val(vbH) ;
	}
	
	function zoomIn() {
		changeViewBoxSize(-1) ;
	}
	
	function zoomOut() {
		changeViewBoxSize(1) ;
	}
	
	function changeViewBoxPosition(dx, dy) {
		var panFactor = $('#txtPanFactor').val();
		vbX = vbX + dx*panFactor ;
		vbY = vbY + dy*panFactor ;
		setViewBox(vbX, vbY, vbW, vbH) ;
	}
	
	var pan = changeViewBoxPosition ;

-->	
</script>

</head>

<body>

<div style="margin-left:10px">
	zoom factor: <input type="text" class="textInput" value="10" id="txtZoomFactor" size="3"/>
	<a href="javascript:zoomIn()">zoom in</a>
	<a href="javascript:zoomOut()">zoom out</a>
</div>

<div id="graph" style="border:#999999 thin dotted;width:600px;height:200px;text-align:center;clear:left;float:left;margin:10px;">

</div>

<table border="0" style="text-align:center;margin-top:10px;" summary="panning controls">
  <tr>
    <td></td>
    <td><a href="javascript:pan(0, -1)">pan up</a></td>
    <td></td>
  </tr>
  <tr>
    <td><a href="javascript:pan(-1, 0)">pan left</a></td>
    <td><input type="text" class="textInput" size="3" id="txtPanFactor" value="10"/></td>
    <td><a href="javascript:pan(1, 0)">pan right</a></td>
  </tr>
  <tr>
    <td></td>
    <td><a href="javascript:pan(0, 1)">pan down</a></td>
    <td></td>
  </tr>
</table>

<table width="100" border="0" style="text-align:right;" summary="svg viewbox information">
  <tr>
    <td>viewBox</td>
  </tr>
  <tr>
    <td>left <input type="text" class="textInput" size="3" id="txtVBX" disabled="disabled"/></td>
  </tr>
  <tr>
    <td>top <input type="text" class="textInput" size="3" id="txtVBY" disabled="disabled"/></td>
  </tr>
  <tr>
    <td>width <input type="text" class="textInput" size="3" id="txtVBW" disabled="disabled"/></td>
  </tr>
    <tr>
    <td>height <input type="text" class="textInput" size="3" id="txtVBH" disabled="disabled"/></td>
  </tr>
</table>

</body>
</html>
