<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml"
    width="100%" xmlns:application="com.mindalliance.channels.view.application.*" xmlns:search="com.mindalliance.channels.view.search.*">
    <mx:Script>
	    <![CDATA[
	    	import mx.containers.Panel;
	    	import com.mindalliance.channels.view.scenario.ArtifactChooser;
	    	import com.mindalliance.channels.view.scenario.TaskChooser;
	    	import com.mindalliance.channels.view.categories.CategoryViewer;
	    	import com.mindalliance.channels.view.people.RoleChooser;
	    	import com.mindalliance.channels.view.categories.CategoryLibraryEditor;
	    	import com.mindalliance.channels.view.people.RoleEditor;
	    	import com.mindalliance.channels.view.scenario.ArtifactEditor;
	    	import com.mindalliance.channels.view.people.PersonalProfileEditor;
	    	import com.mindalliance.channels.view.scenario.EventEditor;
	    	import com.mindalliance.channels.view.scenario.TaskEditor;
	    	import mx.events.CloseEvent;
	    	import com.mindalliance.channels.view.resources.RepositoryEditor;
	    	import mx.controls.Menu;
	    	import com.mindalliance.channels.view.people.OrganizationEditor;
	    	import com.mindalliance.channels.view.categories.CategoryChooser;
	        import mx.containers.TitleWindow;
	        import mx.events.FlexMouseEvent;
	        import mx.controls.Alert;
	        import mx.events.MenuEvent;
        	import mx.core.IFlexDisplayObject;
            import mx.managers.PopUpManager;
        
        	[Bindable]
        	private var username:String = 'John Doe';
        
            private static var classHash:Object = {
                "Category Library Editor":CategoryLibraryEditor,
                "Category Viewer":CategoryViewer, 
                "Category Chooser":CategoryChooser,
                "Personal Profile Editor":PersonalProfileEditor,
                "Role Editor":RoleEditor,
                "Role Chooser":RoleChooser,
                "Organization Editor":OrganizationEditor,
                "Repository Editor":RepositoryEditor,
                "Task Editor":TaskEditor,
                "Task Chooser":TaskChooser,
                "Event Editor":EventEditor,
                "Artifact Editor":ArtifactEditor,
                "Artifact Chooser":ArtifactChooser
                };
                
            private function menuBarItemClicked(event:MenuEvent):void {
                var c:Class = classHash[event.item.@label] ;
            	var popUp:TitleWindow ;
            	popUp = TitleWindow(PopUpManager.createPopUp(this, TitleWindow)) ;
            	popUp.addChild(new ClassFactory(c).newInstance()) ;
            	popUp.showCloseButton = true ;
            	popUp.addEventListener(CloseEvent.CLOSE, function handler(event:CloseEvent):void {PopUpManager.removePopUp(popUp)}) ;
                popUp.x = this.x + 100 ;
                popUp.y = this.y ;
            }
            
	    ]]>
	</mx:Script>
		
     <mx:XMLList id="ChannelsMenuBarItems">
        <menuitem label="*TEST*Forms">
			<menuitem label="Category Library Editor"/>
			<menuitem label="Category Viewer"/>
			<menuitem label="Category Chooser"/>
			<menuitem label="Personal Profile Editor"/>
			<menuitem label="Role Editor"/>
			<menuitem label="Role Chooser"/>
			<menuitem label="Organization Editor"/>
			<menuitem label="Repository Editor"/>
			<menuitem label="Task Editor"/>
			<menuitem label="Task Chooser"/>
			<menuitem label="Event Editor"/>
			<menuitem label="Artifact Editor"/>
			<menuitem label="Artifact Chooser"/>
        </menuitem>
        <menuitem label="Project">
        	<menuitem label="Create New Project"/>
        	<menuitem label="Edit Project Properties"/>
        	<menuitem type="separator"/>
        	<menuitem label="other commands" enabled="false"/>
        </menuitem>
		<menuitem label="Scenario">
        	<menuitem label="Create New Scenario"/>
        	<menuitem label="Edit Scenario Properties"/>
        	<menuitem id="switchScenario" label="Switch to a Different Scenario"/>
        	<menuitem type="separator"/>
	    	<menuitem label="other commands" enabled="false"/>
        </menuitem>
		<menuitem label="Shared elements">
			<menuitem label="Categories"/>
		</menuitem>
    </mx:XMLList>
	
    <mx:MenuBar id="channelsMenuBar" dataProvider="{ChannelsMenuBarItems}" labelField="@label" showRoot="false" itemClick="menuBarItemClicked(event)"/>
    <mx:Spacer width="100%"/>
    <application:ProjectScenarioIndicator/>
    <mx:Button label="Go to Dashboard"/>
	<mx:Spacer width="100%"/>
	<mx:Label text="{'Logged in as: '+username}"/>
	<mx:Button label="Logout"/>
</mx:HBox>
