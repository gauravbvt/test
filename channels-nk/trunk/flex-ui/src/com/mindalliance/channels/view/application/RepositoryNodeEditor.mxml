<?xml version="1.0" encoding="utf-8"?>
<mx:TabNavigator xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:resources="com.mindalliance.channels.view.resources.*"
	xmlns:people="com.mindalliance.channels.view.people.*"
	creationComplete="init()">
	
	<mx:Script>
		<![CDATA[
			import com.mindalliance.channels.vo.OrganizationVO;
			import com.mindalliance.channels.vo.RepositoryVO;
			import com.mindalliance.channels.util.CairngormHelper;
			import com.mindalliance.channels.events.resources.GetRepositoryEvent;
			import com.mindalliance.channels.model.ChannelsModelLocator;
			import com.mindalliance.channels.model.application.RepositoryNodeEditorModel;
            private var model : RepositoryNodeEditorModel = ChannelsModelLocator.getInstance().propertyEditorModel.repositoryNodeEditorModel;
		
			private function init():void {
                repositoryEditor.model = model.repositoryModel;
                organizationEditor.model = model.organizationModel;
            }
            
            [Bindable]
            private var _reposID:String ;
            
            [Bindable]
            private var _orgID:String ;
            
            public function loadRepository(reposID:String):void {
				var getReposEvent:GetRepositoryEvent = new GetRepositoryEvent(_reposID, repositoryEditor.model) ;
				CairngormHelper.fireEvent(getReposEvent) ;
            }
            
		]]>
	</mx:Script>
	
	<mx:Binding source="((ChannelsModelLocator.getInstance().getElementModel(_reposID) as RepositoryVO).organization as OrganizationVO).id" destination="_orgID"/>
	
	<resources:RepositoryEditor label="{'Repository: '}" id="repositoryEditor"/>
	<people:OrganizationEditor label="{'Organization: '}" id="organizationEditor" enabled="{_orgID != null}"/>
</mx:TabNavigator>