<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml"
	xmlns:common="com.mindalliance.channels.view.common.*"
	implements="com.mindalliance.channels.view.common.IChannelsModelComponent">
	
	<mx:Script>
		<![CDATA[
			import mx.managers.PopUpManager;
			import mx.core.IFlexDisplayObject;
 			import com.mindalliance.channels.model.IChannelsModel;
			import com.mindalliance.channels.model.categories.CategoryViewerModel;
			
			[Bindable]
			private var model : CategoryViewerModel;
			
			public function get channelsModel() : IChannelsModel {
				return model;	
			}
			
			public function set channelsModel(model : IChannelsModel) : void {
				this.model = (model as CategoryViewerModel);
			}       
			private function showCategoryChooser():void {
				var p:Point = listCategories.localToGlobal(new Point(listCategories.x, listCategories.y)) ;
				var popup:IFlexDisplayObject = PopUpManager.createPopUp(listCategories, CategoryChooser, false) ;
				PopUpManager.centerPopUp(popup) ;
			}
		]]>
	</mx:Script>
	
	<mx:states>
		<mx:State name="EditState">
			<mx:SetProperty target="{lblEOI}" name="text" value="2. Select Elements of Information"/>
			<mx:AddChild relativeTo="{vboxCategories}" position="lastChild">
				<mx:HBox width="100%">
					<common:AddButton click="showCategoryChooser()"/>
					<common:RemoveButton enabled="{listCategories.selectedItems.length > 0}"/>
				</mx:HBox>
			</mx:AddChild>
			<mx:AddChild relativeTo="{listCategories}" position="before">
				<mx:Label text="1. Assign categories"/>
			</mx:AddChild>
		</mx:State>
	</mx:states>
	
	<mx:transitions>
		<mx:Transition fromState="*" toState="*">
			<mx:Parallel>
				<mx:Resize/>
				<mx:Fade/>
			</mx:Parallel>
		</mx:Transition>
	</mx:transitions>
	
	<mx:VBox id="vboxCategories" height="100%">
		<mx:List id="listCategories" height="100%" editable="false"/>
	</mx:VBox>
	<mx:VBox>
		<mx:Label text="Elements of Information" id="lblEOI"/>
		<mx:DataGrid draggableColumns="false" variableRowHeight="true" id="dgEOIs" editable="false">
			<mx:columns>
				<mx:DataGridColumn headerText="Topic" wordWrap="false"/>
				<mx:DataGridColumn headerText="Label" rendererIsEditor="true" editorDataField="selected">
					<mx:itemEditor>
						<mx:Component>
							<mx:CheckBox/>
						</mx:Component>
					</mx:itemEditor>
				</mx:DataGridColumn>
			</mx:columns>
		</mx:DataGrid>
	</mx:VBox>
</mx:HBox>