<?xml version="1.0" encoding="utf-8"?>
<mas:CustomPanel xmlns:mx="http://www.adobe.com/2006/mxml"
    xmlns:mas="com.mindalliance.ui.*"
    title="-type: name-" status="-summary info-"
    creationComplete="onCreationComplete()"
    resizeEffect="Resize"
    minWidth="{PROPERTY_EDITOR_MIN_WIDTH}">

    <mx:Script>
        <![CDATA[
            import mx.events.FlexMouseEvent;
            import mx.managers.PopUpManager;
            import mx.effects.easing.Cubic;
            import mx.controls.Alert;
            import mx.events.ResizeEvent;
            import com.mindalliance.UtilFuncs;
            import mx.events.ListEvent;
            
            private function onCreationComplete():void {
                setupAutoShrink() ;
            }
            
            private var propertyEditorWidth:int ;
            private static const PROPERTY_EDITOR_MIN_WIDTH:int = 102;
            private function setupAutoShrink():void {
                propertyEditorWidth = this.width ;
                this.addEventListener(MouseEvent.MOUSE_OVER, propertyEditorRestore);
                this.addEventListener(MouseEvent.MOUSE_OUT, propertyEditorShrink) ;
                this.addEventListener(ResizeEvent.RESIZE, propertyEditorUpdateWidth);
                propertyEditorShrink(null);
            }
            
            private function propertyEditorUpdateWidth(event:ResizeEvent):void {
                if (!cbAutoHide.selected)
                propertyEditorWidth = this.width ;
            }
            
            private function propertyEditorRestore(event:MouseEvent):void {
                if (cbAutoHide.selected)
                this.width = propertyEditorWidth ;
            }
            
            private function propertyEditorShrink(event:MouseEvent):void {
                if (this.contentMouseX >= 0 && this.contentMouseX <= this.width && 
                    this.contentMouseY >=0 && this.contentMouseY <= this.height)
                    return;
                if (cbAutoHide.selected)
                    this.width = PROPERTY_EDITOR_MIN_WIDTH ;
            }
        ]]>
    </mx:Script>

    <mx:ViewStack id="viewStack" width="100%" height="100%">
        <mas:OrganizationEditor id="organizationEditor" width="100%" height="100%"/>
        <mas:RolesEditor id="rolesEditor" width="100%" height="100%"/>
    </mx:ViewStack>	
	<mx:ControlBar>
	    <mx:CheckBox id="cbAutoHide" label="Auto Hide" selected="true"/>
	</mx:ControlBar>
	
</mas:CustomPanel>
