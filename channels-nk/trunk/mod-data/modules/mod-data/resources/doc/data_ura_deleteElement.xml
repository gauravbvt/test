<?xml version="1.0" encoding="UTF-8"?>

<document>
	<title>channels_data_deleteElement</title>
	<!--***************Cascading Style Sheets***************-->
	<csslist>
		<css>/xlib/styles/css_ten60_lnf.css</css>
		<css>/xlib/styles/xmlverbatim.css</css>
	</csslist>
	<!--***************Links***************-->
	<links>
	</links>
	<!--***************Table of Contents***************-->
	<toc>
		<section name="title"/>
		<section name="definition"/>
		<section name="purpose"/>
	</toc>
	
	<section name="title" styleuri="/xusr/share/doc/styles_1060/style_title.xsl">
		<content>
			<name>channels_data_deleteElement</name>
			<text>Accessor to delete an element in the opened model</text>
		</content>
	</section>
	
	<section name="definition" styleuri="/xusr/share/doc/styles_1060/style_definition.xsl">
		<content>
			<module>urn:com:mindalliance:channels:data</module>
			<format>
				<sub name="format"/>
			</format>
			<returns>
				<ids>
          <deleted>
            <id>someId</id>
            <id>someOtherId</id>
            <id>etc</id>
          </deleted>
          <updated>
            <id>someId</id>
            <id>someOtherId</id>
            <id>etc</id>
          </updated>
        </ids>
			</returns>
			<syntax>
				<type><b>channels_data_deleteElement</b></type>
				<id req="true">the element's id</id>
				<target req="false">identifiers of deleted elements</target>
			</syntax>
		</content>
		<includes>
			<include name="format" type="xml">
		    <instr>
		      <type>channels_data_deleteElement</type>
		      <id>1230980875AD45A6BC</id>
		      <target>this:response</target>
		    </instr>
			</include>
		</includes>
	</section>
	
	<section name="purpose" styleuri="/xusr/share/doc/styles_1060/style_basic.xsl">
		<content>
	    <p>
				The <code>channels_data_deleteElement</code> accessor removes the element with the given unique id from the currently opened model.
        Other elements with references to it are either updated with references removed, or they are removed altogether.
        A reference table determines which referring elements are updated and which are deleted. The process is recursive (cascaded deletes).
			</p>
			<p>The response is the list of identifiers for all deleted elements. For example: </p>
      <sub name="ids"/>
      <p>
        The reference table at (private) uri <code>ffcpl:/resources/schemas/referenceTable.xml</code> instructs the updates and consequent
        deletions required to maintain the referential integrity of the model. A sample reference table:
      </p>
       <sub name="referenceTable"/>
      <p>
        When an element is deleted, other elements may need to be updated by having references to the deleted location removed.
        The <code>reference</code> element with a <code>to</code> attribute naming the kind of element deleted provides
        instructions as to what referring elements to update or delete.
        The <code>from</code> elements in the relevant <code>reference</code> element
        contain reference paths that instruct where to look for references to the deleted element. The <code>cascade</code>
        attribute of a <code>from</code> element instructs what to do with the referring element.
      </p>
      <p> 
        If the cascade path is a single period then the referring element must be deleted as a whole (which may trigger further
        deletes and updates). Otherwise, the cascade path indicates how to remove the referrence without deleting the referring element.
        If no cascade attribute is given, it defaults to the referrence path. This means that the element directly containing the id
        of the deleted element is to be removed. If the cascade is a truncation of the referrence path, then an element that is a parent of the
        element directly containing the id needs to be removed.
      </p>
       <p>
        For example, according to the sample reference table, when a location is deleted, other locations may need to be updated.
        The paths <code>./within/locationId</code> and <code>./nextTo/locationId</code> instruct where to look
        for the ids of the deleted location (references to it). The cascades default to the reference paths so only <code>locationId</code>
        elements would be removed. For either events or tasks, the id of the deleted location is looked up under
        <code>./where/locationId</code> but the cascade path is <code>./where</code> meaning that the enclosing <code>where</code> 
        element needs to be removed.
      </p>
		</content>
		<includes>
      <include name="ids" type="xml">
				<ids>
          <deleted>
            <id>1111</id>
            <id>2222</id>
            <id>etc</id>
          </deleted>
          <updated>
            <id>3333</id>
            <id>4444</id>
            <id>etc</id>
          </updated>
        </ids>
			</include>
      <include name="referenceTable" type="xml">
        <references>
          <reference to="location">
            <from element="location">./within/locationId</from>
            <from element="location">./nextTo/locationId</from>
            <from element="event|task" cascade="./where">./where/locationId</from>
          </reference>
          <reference to="project">
            <from element="scenario" cascade=".">./projectId</from>
          </reference>
        </references>
      </include>
		</includes>
	</section>
</document>