<grammar xmlns="http://relaxng.org/ns/structure/1.0">
  <!--
  include href="http://@host@:@port@/channels/schema/def_all.rnc"
  include href="http://@host@:@port@/channels/schema/def_identified.rnc"
  include href="http://@host@:@port@/channels/schema/def_categorized.rnc"
  include href="http://@host@:@port@/channels/schema/def_occurrence.rnc"
  include href="http://@host@:@port@/channels/schema/def_duration.rnc"
  
  start =
    element event {
      {all} &
      {identified} &
      {categorized} &
      {occurrence} &
      element terminatesAfter {
        {duration} |
        element taskCompletions {
          element taskId {text}
        }
      }?
    }
  -->
  <include href="http://@host@:@port@/channels/schema/def_all.rng"/>
  <include href="http://@host@:@port@/channels/schema/def_identified.rng"/>
  <include href="http://@host@:@port@/channels/schema/def_categorized.rng"/>
  <include href="http://@host@:@port@/channels/schema/def_occurrence.rng"/>
  <include href="http://@host@:@port@/channels/schema/def_duration.rng"/>
  
  <start>
    <element name="event">
      <interleave>
        <ref name="all"/>
        <ref name="identified"/>
        <ref name="categorized"/>
        <ref name="occurrence"/>
        <optional>
          <element name="terminatesAfter">
            <choice>
              <ref name="duration"/>
              <element name="taskCompletions">
                <element name="taskId"><text/></element>
              </element>
            </choice>
          </element>
        </optional>
      </interleave>
    </element>
  </start>
</grammar>