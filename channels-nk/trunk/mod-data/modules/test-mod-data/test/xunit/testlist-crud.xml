<?xml version="1.0" encoding="UTF-8"?>
<testlist title="mod-data CRUD tests">
	<desc>
		<div>
		<b>mod-data</b> CRUD unit tests.
		</div>
	</desc>
  <test>
    <uri>active:dpml+operand@ffcpl:/test/crud/testOpenModel.idoc</uri>
    <assert name="Opening container returns true">
      <uri>active:javascript+operator@ffcpl:/test/isTrue.js</uri> 
    </assert>
    <assert name="No caching">
      <expired/>
    </assert>
  </test>
  <test>
    <uri>active:dpml+operand@ffcpl:/test/crud/testCreateElement.idoc</uri>
    <assert name="Element created with id and schema attributes">
      <xpath>self::node()[@schema]/id</xpath>
    </assert>
  </test>
  <test>
    <uri>active:javascript+operator@ffcpl:/test/crud/testGetElement.js</uri>
    <assert name="Got element with an id">
      <xpath>./id</xpath>
    </assert>
  </test>
  <test>
    <uri>active:javascript+operator@ffcpl:/test/crud/testGetElementNamingListedRefs.js</uri>
    <assert name="Got element with named references">
     <xpath>./categories/categoryId/@name</xpath>
     <xpath>./terminatesAfter/taskCompletions/taskId/@name</xpath>
    </assert>
  </test> 
  <test>
    <uri>active:javascript+operator@ffcpl:/test/crud/testDeleteElement.js</uri>
    <assert name="Deleted element">
      <uri>active:javascript+operator@ffcpl:/test/isTrue.js</uri> 
    </assert>
  </test>
  <test>
    <uri>active:dpml+operand@ffcpl:/test/crud/testUpdateElement.idoc</uri>
    <assert name="Updated element">
      <uri>active:javascript+operator@ffcpl:/test/isTrue.js</uri> 
    </assert>
  </test>
  <test>
    <uri>active:dpml+operand@ffcpl:/test/crud/testQueryModel.idoc</uri>
    <assert name="Query returned a least one result">
      <xpath>./*[1]</xpath>
    </assert>
  </test>
  <test>
    <uri>active:javascript+operator@ffcpl:/test/crud/testGetInformationForElement.js</uri>
    <assert name="Information template returned">
      <xpath>.//topic/eoi/name</xpath>
    </assert>
  </test>
  <test>
    <uri>active:javascript+operator@ffcpl:/test/crud/testGetInformationForCategories.js</uri>
    <assert name="Information template returned">
      <xpath>.//topic/eoi/name</xpath>
    </assert>
  </test>
  <test>
    <uri>active:javascript+operator@ffcpl:/test/crud/testAllQueries.js</uri>
    <assert name="All queries succeed">
      <uri>active:javascript+operator@ffcpl:/test/isTrue.js</uri> 
    </assert>
  </test>
  <!-- hangs in NK3.2 - fixed in NK3.3
  <test>
    <uri>active:javascript+operator@ffcpl:/test/crud/testAsyncCrud.js</uri>
    <assert name="Async Crud">
      <uri>active:javascript+operator@ffcpl:/test/isTrue.js</uri> 
    </assert>
  </test>
    -->
</testlist>
